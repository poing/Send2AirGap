---
date: 2025-01-16
authors: [poing]
description: Working on `cv` mocking.

categories:
  - Blog
---

# :opencv:{ .middle} Mocking `cv2` for Testing

Now that I have a working prototype, now it's time to work on testing the code.  Which is complicated, when dealing with a broadcast GUI and the receiving camera.

Working to `mock` the camera and inputs to perform testing.  Once this is worked out, I will be able to use `pytest` to improve the code coverage.


<!-- more -->


I've been using ChatGPT for suggestions, _it helps sometimes_.

```
working directory gems/mock
```

- __basic_window.py__: This is a basic `BroadcastWindow`
- __cv_mock0.py__: Just a simple `cv2`
- __cv_mock1.py__: Simple `cv2` with display of what the camera sees
- __cv_mock2.py__: Wanted the camera to see the `BroadcastWindow`, instead the display was put in the `BroadcastWindow`.  `FAIL`
- __cv_mock3.py__: Tried again, active window was put in the `BroadcastWindow`.  `FAIL`
- __cv_mock4.py__: Tried to insert the `BroadcastWindow` into `generate_fake_frame()`.  `FAIL`
- __cv_mock4_updated.py__: ChatGPT tried to insert the `BroadcastWindow` into the frame.  `FAIL`
- __cv_mock5.py__: Another attempt to insert the `BroadcastWindow` into frame.  `FAIL`
- __cv_mock6.py__: Insert a `canvas` into frame.  `resize issue`
- __cv_mock7.py__: Re-work the `frame` size, _for more flexability_.
- __cv_mock_8.py__: Trying to bypass `tk.Tk()` window.  `FAIL`

Ended up dropping the idea of putting the _window_ inside the frame.  Shifting focus to testing the logic, without the window.  Placing the _necessary_ images into the fame _instead_.

- __cv_mock_9.py__: Attempt to put the image into the frame.  `FAIL`
- __cv_mock_10.py__: A functional and working __base__ frame with image.
- __cv_mock_11.py__: Passing info from  `Broadcast()`.  `FAIL`
- __basic_frame_image.py__: A functional and working __base__ frame with image.
 
## Need to re-evaluate

While I reached a working base to show the frame.  Am not sure if this is the direction to go it. 

I _could_ just `mock` the whole `tk.Tk()` interaction and logic.  It does not accomplish the original test objectives.  


